{"ast":null,"code":"// ゲーム開始画面から遷移してきた際に処理を実施する。\nwindow.addEventListener('load', function () {\n  gameStart();\n});\n\nfunction gameStart() {\n  // 表示する単語リストを定義する。\n  // chromeの場合\"ff\"が正常に動作しない。\n  // 選択した英単語難易度によって変わるwordListの定義\n  var wordList = gon.wordListAll; // 選択したプレイモードによって変わるplayModeの定義\n\n  var playMode = gon.playMode; // 表示するメーターリストを定義する。\n\n  var imgArray = ['/assets/メーターPNG/メーター0.png', '/assets/メーターPNG/メーター10_yellow.png', '/assets/メーターPNG/メーター20_yellow.png', '/assets/メーターPNG/メーター30_yellow.png', '/assets/メーターPNG/メーター40_yellow.png', '/assets/メーターPNG/メーター50_yellow.png', '/assets/メーターPNG/メーター60_yellow.png', '/assets/メーターPNG/メーター70_yellow.png', '/assets/メーターPNG/メーター80_yellow.png', '/assets/メーターPNG/メーター90_yellow.png', '/assets/メーターPNG/メーター100_yellow.png', '/assets/メーターPNG/メーター10_green.png', '/assets/メーターPNG/メーター20_green.png', '/assets/メーターPNG/メーター30_green.png', '/assets/メーターPNG/メーター40_green.png', '/assets/メーターPNG/メーター50_green.png', '/assets/メーターPNG/メーター60_green.png', '/assets/メーターPNG/メーター70_green.png', '/assets/メーターPNG/メーター80_green.png', '/assets/メーターPNG/メーター90_green.png', '/assets/メーターPNG/メーター100_green.png', '/assets/メーターPNG/メーター10_blue.png', '/assets/メーターPNG/メーター20_blue.png', '/assets/メーターPNG/メーター30_blue.png', '/assets/メーターPNG/メーター40_blue.png', '/assets/メーターPNG/メーター50_blue.png', '/assets/メーターPNG/メーター60_blue.png', '/assets/メーターPNG/メーター70_blue.png', '/assets/メーターPNG/メーター80_blue.png', '/assets/メーターPNG/メーター90_blue.png', '/assets/メーターPNG/メーター100_blue.png', '/assets/メーターPNG/メーター10_pink.png', '/assets/メーターPNG/メーター20_pink.png', '/assets/メーターPNG/メーター30_pink.png', '/assets/メーターPNG/メーター40_pink.png', '/assets/メーターPNG/メーター50_pink.png', '/assets/メーターPNG/メーター60_pink.png', '/assets/メーターPNG/メーター70_pink.png', '/assets/メーターPNG/メーター80_pink.png', '/assets/メーターPNG/メーター90_pink.png', '/assets/メーターPNG/メーター100_pink.png', '/assets/メーターPNG/メーター10_red.png', '/assets/メーターPNG/メーター20_red.png', '/assets/メーターPNG/メーター30_red.png', '/assets/メーターPNG/メーター40_red.png', '/assets/メーターPNG/メーター50_red.png', '/assets/メーターPNG/メーター60_red.png', '/assets/メーターPNG/メーター70_red.png', '/assets/メーターPNG/メーター80_red.png', '/assets/メーターPNG/メーター90_red.png', '/assets/メーターPNG/メーター100_red.png']; // 表示するメーター初期値を定義する。\n\n  var bonusCountMeter = 0; // 表示するメーター最大値を定義する。\n\n  var bonusCountMeterMax = 50; // 表示するプレイ延長時間を定義する。\n\n  var displayBonusAddPlayTime = document.getElementById(\"displayBonusAddPlayTime\");\n  displayBonusAddPlayTime.className = \"displayBonusAddPlayTime\"; // メーター最大値に達した際の延長するプレイ時間を定義する。\n\n  var bonusAddPlayTime = 3000; // ゲーム開始までをカウントダウン変数の初期値を定義する。\n\n  var countDownPopupNumber = 3; // ゲーム開始までをカウントダウンを1秒ごとに実施するように定義する。\n\n  var timerIdToStart = setInterval(countDownTimeToStart, 1000); // ゲーム開始までをカウントダウンを実施する処理を定義する。\n\n  function countDownTimeToStart() {\n    // メーターの初期値を表示する。\n    document.getElementById(\"meterImg\").src = imgArray[bonusCountMeter]; // ゲーム開始までをカウントダウン変数を定義する。\n\n    var countDownPopup = document.getElementById(\"countDownPopup\"); // class属性を付与する。\n\n    countDownPopup.className = \"countDownPopup\"; // ゲーム開始までをカウントダウン変数の初期値を表示する。\n\n    countDownPopup.textContent = countDownPopupNumber; // ゲーム開始宣言の変数を定義する。\n\n    var gameStartCallAfterClose = document.getElementById(\"gameStartCall\"); // ゲーム開始宣言にclass属性を付与する。\n\n    gameStartCallAfterClose.className = \"gameStartCallAfterClose\"; //カウントダウンが0になれば、ゲームを開始する。\n\n    if (countDownPopupNumber <= 0) {\n      clearInterval(timerIdToStart); // カウントダウンポップアップのクラスを変更し、非表示にする。\n\n      countDownPopup.className = \"countDownPopupAfterClose\";\n      typingPlayStart();\n    } else {\n      countDownPopup.textContent = countDownPopupNumber;\n    } // カウントダウン文字を１ずつ減らす。\n\n\n    countDownPopupNumber = countDownPopupNumber - 1;\n  } // ゲームを開始する処理を定義する。\n\n\n  function typingPlayStart() {\n    // 表示する単語を定義する。\n    var displayWord = document.getElementById(\"displayWord\");\n    displayWord.className = \"displayWord\";\n    var displayWordJapanese = document.getElementById(\"displayWordJapanese\");\n    displayWordJapanese.className = \"displayWordJapanese\"; // 表示する単語を一文字ずつに分ける変数を定義する。\n\n    var charArrayInDisplayWord = []; // ゲーム終了を判定するフラグを定義する。\n\n    var playEndFlag = \"0\"; // 表示する単語を作成する。\n\n    createDisplayWord(); // プレイ開始時間を取得する。\n\n    var startTime = Date.now(); // 表示する残りのプレイ可能時間を定義する。\n\n    var remainPlayingTime = document.getElementById(\"remainPlayingTime\");\n    remainPlayingTime.className = \"remainPlayingTime\"; // 表示するスタート時のプレイ可能時間を定義する。\n\n    var initialPlayingTimeMSec = 5000; // スタート時に残りのプレイ可能時間の初期値を表示するためにcountDownTimeを実施する。\n\n    setTimeout(countDownTime, 0); // 1秒ごとにcountDownTimeを実施するように定義する。\n\n    var timerId = setInterval(countDownTime, 1000); // 正解時に表示する丸を定義する。\n\n    document.getElementById(\"circleImg\").src = '/assets/正解○.png';\n    circleImg.classList.add('transparent'); // \"答えを見る\"ボタンを表示する。(プレイモード普通、正確重視の時のみ)\n\n    if (playMode == \"普通\" || playMode == \"正確重視\") {\n      var _answerButton = document.getElementById(\"answerButton\");\n\n      _answerButton.innerHTML = \"答えを見る\";\n      _answerButton.className = \"answerButton\";\n\n      _answerButton.onclick = function () {\n        for (var i = 0; i < charArrayInDisplayWord.length; i++) {\n          charArrayInDisplayWord[i].classList.remove('transparent');\n        }\n\n        displayWord.className = \"displayWord\";\n      };\n    }\n\n    ; // 表示するスコアを定義する。\n\n    var displayScore = document.getElementById(\"displayScore\");\n    displayScore.className = \"displayScore\"; // 合計スコアの初期値を定義する。\n\n    var totalScore = 0; // 表示するスコアに初期値を定義する。\n\n    displayScore.textContent = totalScore + \" P\"; // スコアアップする基準を定義する。\n\n    var refTextLengthForCountUpLevel1 = 4;\n    var addScoreLevel1 = 1000;\n    var addScoreLevel2 = 3000; // タイプされる度にkeyDownCharCountUpを実施するように定義する。\n\n    document.addEventListener(\"keydown\", keyDownCharCountUp); // 表示する単語を作成する処理を定義する。\n\n    function createDisplayWord() {\n      // すでにゲームが終了している場合、新規ワードを生成しない。ゲーム中のみ生成する。\n      // ギリギリで問題に正解した場合、○を表示した後、200m秒後にワードを生成する処理が走るため。\n      if (playEndFlag === \"0\") {\n        // 表示単語を初期化する。\n        displayWord.textContent = \"\"; // 0〜textListsの総数間で整数値をランダムで算出する。\n\n        var randomIntegerInTotalWordList = Math.floor(Math.random() * wordList.length); // 表示する単語をランダムで選定する。\n\n        displayWordInList = wordList[randomIntegerInTotalWordList]; // 表示する単語の日本語訳を表示させる。\n\n        displayWordJapanese.textContent = displayWordInList.jap_trans_1; // 表示する単語を一文字ごとに区切り、spanタグで閉じる。\n        // spanタグで閉じた単語を表示する。\n\n        charArrayInDisplayWord = displayWordInList.eng_word.split(\"\").map(function (value) {\n          // spanタグを作成する。\n          var spanValue = document.createElement(\"span\"); // spanタグに一文字を挿入する。\n\n          spanValue.textContent = value; // 各アルファベットに対して、transparentクラスを付与する。（プレイモード普通、正確重視のときのみ）\n\n          if (playMode == \"普通\" || playMode == \"正確重視\") {\n            spanValue.className = \"transparent\";\n          }\n\n          ; // 表示する単語にspanタグで閉じた一文字を追加する。\n\n          displayWord.appendChild(spanValue);\n          return spanValue;\n        });\n      }\n\n      ;\n    } // プレイ時間をカウントダウンする処理を定義する。\n\n\n    function countDownTime() {\n      var currentTime = Date.now();\n      var diffBetweenCurrentTimeAndStartTime = currentTime - startTime;\n      var remainMSec = initialPlayingTimeMSec - diffBetweenCurrentTimeAndStartTime;\n      var remainSec = Math.ceil(remainMSec / 1000);\n      var remainSecLabel = \"\\u6B8B\\u308A\".concat(\"00\".concat(remainSec).slice(-3), \"\\u79D2\");\n\n      if (remainMSec <= 0) {\n        // ゲーム終了後にplayEndFlagを1に更新する。\n        playEndFlag = \"1\"; // プレイ時間のカウントダウンを止める。\n\n        clearInterval(timerId); // 残り時間の表示を消す。\n\n        remainSecLabel = \"\"; // 現在のスコア（左上）の表示を消す。\n\n        displayScore.textContent = \"\"; // 問題の英単語の表示を消す。\n\n        displayWord.textContent = \"\"; // 解答の日本語の表示を消す。\n\n        displayWordJapanese.textContent = \"\"; // 答えを見るボタンを消す。（プレイモード普通、正確重視の時のみ）\n\n        if (playMode == \"普通\" || playMode == \"正確重視\") {\n          answerButton.remove();\n        }\n\n        ; // 正解時に表示される○の画像を消す。\n\n        circleImg.remove(); // ゲーム終了後に終了を知らせるポップアップを作成する。\n        // ゲーム終了を知らせるポップアップを定義する。\n\n        var closePopup = document.getElementById(\"closePopup\");\n        closePopup.textContent = \"終了\";\n        closePopup.className = \"closePopup\"; // 戻るボタンを定義する。\n\n        var backBtn = document.getElementById(\"backBtn\"); // もう一度ボタンを定義する。\n\n        var restartBtn = document.getElementById(\"restartBtn\"); // 2秒後に得点を表示させる。また、もう一度ボタンと戻るボタンを表示させる。\n\n        setTimeout(function () {\n          closePopup.textContent = \"\\u3042\\u306A\\u305F\\u306E\\u5F97\\u70B9\\u306F\".concat(totalScore.toLocaleString(), \"\\u70B9\\u3067\\u3059!\");\n          closePopup.className = \"endResultPopup\";\n          restartBtn.addEventListener('click', function gameReStart() {\n            closePopup.className = \"endResultPopupAfterClose\";\n            restartBtn.className = \"restartBtnAfterClose\";\n            backBtn.className = \"backBtnAfterClose\";\n            gameStart();\n          });\n          restartBtn.innerHTML = \"<a href='./typingplay_eng'>もう一度遊ぶ</a>\";\n          restartBtn.className = \"restartBtn\";\n          backBtn.innerHTML = \"<a href='./typingplay_index'>コース選択画面に戻る</a>\";\n          backBtn.className = \"backBtn\";\n        }, 2000);\n      } // 残りプレイ可能時間を更新する。\n\n\n      remainPlayingTime.textContent = remainSecLabel;\n    }\n\n    ; // スコアをアップし、現在のtotalScoreを表示する処理を定義する。\n\n    function countUpScore() {\n      if (displayWord.textContent.length < refTextLengthForCountUpLevel1) {\n        addPoint = addScoreLevel1;\n      } else {\n        addPoint = addScoreLevel2;\n      }\n\n      totalScore = totalScore + addPoint;\n      displayScore.textContent = \"\".concat(totalScore.toLocaleString(), \" P\");\n      return totalScore;\n    } // ゲーム中にタイプした文字が表示文字と一致する場合、不一致の場合の処理を定義する。\n\n\n    function keyDownCharCountUp(keyDownChar) {\n      if (keyDownChar.key === charArrayInDisplayWord[0].textContent && playEndFlag === \"0\") {\n        correctTyping();\n      } else if (playEndFlag === \"0\") {\n        // タイプミスでメーターを初期値に戻す。\n        bonusCountReset();\n      } else {}\n\n      ;\n    }\n\n    ; // タイプした文字が表示文字と一致する場合の処理を定義する。\n\n    function correctTyping() {\n      // 文字色を変更する。\n      charArrayInDisplayWord[0].className = \"add_red\"; // メーターを更新する。\n\n      bonusCountMeter = bonusCountMeter + 1; // 一致した文字を配列から削除する。\n\n      charArrayInDisplayWord.shift(); // 表示文字全てタイプした場合、スコアアップ処理を実施し、次の表示文字を作成する処理を実施する。\n\n      if (charArrayInDisplayWord.length === 0) {\n        countUpScore();\n        circleImg.classList.add('circle');\n        circleImg.classList.remove('transparent');\n        setTimeout(createDisplayWord, 200);\n        setTimeout(function () {\n          circleImg.classList.add('transparent');\n          circleImg.classList.remove('circle');\n        }, 200);\n      }\n\n      ; // メーターがメーター最大値以上になった場合、メーターを初期化し、プレイ可能時間を延長する。\n\n      if (bonusCountMeter >= bonusCountMeterMax) {\n        bonusCountMeter = 0; // 初期プレイ時間を更新することで、残りプレイ可能時間を延長する。\n\n        initialPlayingTimeMSec = initialPlayingTimeMSec + bonusAddPlayTime; // 延長した残りプレイ時間を表示する。\n\n        displayBonusAddPlayTime.textContent = \"+ \" + Math.ceil(bonusAddPlayTime / 1000) + \"秒\"; // 延長した残りプレイ時間をフェードアウトする。\n\n        displayBonusAddPlayTime.classList.add('fadeout'); // fadeoutのclassを取り除くことで、2回目以降も延長した残りプレイ時間が表示されるようにする。\n\n        setTimeout(function () {\n          displayBonusAddPlayTime.textContent = \"\";\n          displayBonusAddPlayTime.classList.remove('fadeout');\n        }, 2000);\n      }\n\n      ; // 更新したメーターを表示する。\n\n      document.getElementById(\"meterImg\").src = imgArray[bonusCountMeter];\n    }\n\n    ; // タイプした文字が表示文字と不一致の場合の処理を定義する。（プレイモードが正確重視の場合のみ）\n    // 不正解の単語の答えを表示し、次の単語を生成する処理。\n    // メーターを0にリセットする処理。\n\n    function bonusCountReset() {\n      if (playMode == \"正確重視\") {\n        createDisplayWord();\n        bonusCountMeter = 0;\n        document.getElementById(\"meterImg\").src = imgArray[bonusCountMeter];\n      }\n\n      ;\n    }\n\n    ;\n  }\n}\n\n;","map":{"version":3,"sources":["/Users/mondenhiroki/projects/eigomonster/app/javascript/packs/typingplay_eng.js"],"names":["window","addEventListener","gameStart","wordList","gon","wordListAll","playMode","imgArray","bonusCountMeter","bonusCountMeterMax","displayBonusAddPlayTime","document","getElementById","className","bonusAddPlayTime","countDownPopupNumber","timerIdToStart","setInterval","countDownTimeToStart","src","countDownPopup","textContent","gameStartCallAfterClose","clearInterval","typingPlayStart","displayWord","displayWordJapanese","charArrayInDisplayWord","playEndFlag","createDisplayWord","startTime","Date","now","remainPlayingTime","initialPlayingTimeMSec","setTimeout","countDownTime","timerId","circleImg","classList","add","answerButton","innerHTML","onclick","i","length","remove","displayScore","totalScore","refTextLengthForCountUpLevel1","addScoreLevel1","addScoreLevel2","keyDownCharCountUp","randomIntegerInTotalWordList","Math","floor","random","displayWordInList","jap_trans_1","eng_word","split","map","value","spanValue","createElement","appendChild","currentTime","diffBetweenCurrentTimeAndStartTime","remainMSec","remainSec","ceil","remainSecLabel","slice","closePopup","backBtn","restartBtn","toLocaleString","gameReStart","countUpScore","addPoint","keyDownChar","key","correctTyping","bonusCountReset","shift"],"mappings":"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","sourcesContent":["// ゲーム開始画面から遷移してきた際に処理を実施する。\nwindow.addEventListener('load', function(){\n\tgameStart();\n});\n\nfunction gameStart(){\n\n  // 表示する単語リストを定義する。\n  // chromeの場合\"ff\"が正常に動作しない。\n\n  // 選択した英単語難易度によって変わるwordListの定義\n  const wordList = gon.wordListAll;\n\n  // 選択したプレイモードによって変わるplayModeの定義\n  const playMode = gon.playMode;\n\n\n  // 表示するメーターリストを定義する。\n  const imgArray =[\n    '/assets/メーターPNG/メーター0.png',\n    '/assets/メーターPNG/メーター10_yellow.png',\n    '/assets/メーターPNG/メーター20_yellow.png',\n    '/assets/メーターPNG/メーター30_yellow.png',\n    '/assets/メーターPNG/メーター40_yellow.png',\n    '/assets/メーターPNG/メーター50_yellow.png',\n    '/assets/メーターPNG/メーター60_yellow.png',\n    '/assets/メーターPNG/メーター70_yellow.png',\n    '/assets/メーターPNG/メーター80_yellow.png',\n    '/assets/メーターPNG/メーター90_yellow.png',\n    '/assets/メーターPNG/メーター100_yellow.png',\n\t'/assets/メーターPNG/メーター10_green.png',\n    '/assets/メーターPNG/メーター20_green.png',\n    '/assets/メーターPNG/メーター30_green.png',\n    '/assets/メーターPNG/メーター40_green.png',\n    '/assets/メーターPNG/メーター50_green.png',\n    '/assets/メーターPNG/メーター60_green.png',\n    '/assets/メーターPNG/メーター70_green.png',\n    '/assets/メーターPNG/メーター80_green.png',\n    '/assets/メーターPNG/メーター90_green.png',\n    '/assets/メーターPNG/メーター100_green.png',\n\t'/assets/メーターPNG/メーター10_blue.png',\n    '/assets/メーターPNG/メーター20_blue.png',\n    '/assets/メーターPNG/メーター30_blue.png',\n    '/assets/メーターPNG/メーター40_blue.png',\n    '/assets/メーターPNG/メーター50_blue.png',\n    '/assets/メーターPNG/メーター60_blue.png',\n    '/assets/メーターPNG/メーター70_blue.png',\n    '/assets/メーターPNG/メーター80_blue.png',\n    '/assets/メーターPNG/メーター90_blue.png',\n    '/assets/メーターPNG/メーター100_blue.png',\n\t'/assets/メーターPNG/メーター10_pink.png',\n    '/assets/メーターPNG/メーター20_pink.png',\n    '/assets/メーターPNG/メーター30_pink.png',\n    '/assets/メーターPNG/メーター40_pink.png',\n    '/assets/メーターPNG/メーター50_pink.png',\n    '/assets/メーターPNG/メーター60_pink.png',\n    '/assets/メーターPNG/メーター70_pink.png',\n    '/assets/メーターPNG/メーター80_pink.png',\n    '/assets/メーターPNG/メーター90_pink.png',\n    '/assets/メーターPNG/メーター100_pink.png',\n\t'/assets/メーターPNG/メーター10_red.png',\n    '/assets/メーターPNG/メーター20_red.png',\n    '/assets/メーターPNG/メーター30_red.png',\n    '/assets/メーターPNG/メーター40_red.png',\n    '/assets/メーターPNG/メーター50_red.png',\n    '/assets/メーターPNG/メーター60_red.png',\n    '/assets/メーターPNG/メーター70_red.png',\n    '/assets/メーターPNG/メーター80_red.png',\n    '/assets/メーターPNG/メーター90_red.png',\n    '/assets/メーターPNG/メーター100_red.png'\n  ];\n\n  // 表示するメーター初期値を定義する。\n  let bonusCountMeter = 0;\n  // 表示するメーター最大値を定義する。\n  const bonusCountMeterMax = 50;\n  // 表示するプレイ延長時間を定義する。\n  const displayBonusAddPlayTime = document.getElementById(\"displayBonusAddPlayTime\");\n  displayBonusAddPlayTime.className =  \"displayBonusAddPlayTime\";\n  // メーター最大値に達した際の延長するプレイ時間を定義する。\n  const bonusAddPlayTime = 3000;\n\n\n\n  // ゲーム開始までをカウントダウン変数の初期値を定義する。\n  let countDownPopupNumber = 3;\n  // ゲーム開始までをカウントダウンを1秒ごとに実施するように定義する。\n  const timerIdToStart = setInterval(countDownTimeToStart,1000);\n\n  // ゲーム開始までをカウントダウンを実施する処理を定義する。\n  function countDownTimeToStart(){\n\t\t// メーターの初期値を表示する。\n\t\tdocument.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n\t\t// ゲーム開始までをカウントダウン変数を定義する。\n\t\tlet countDownPopup = document.getElementById(\"countDownPopup\");\n\t\t// class属性を付与する。\n\t\tcountDownPopup.className = \"countDownPopup\";\n\t\t// ゲーム開始までをカウントダウン変数の初期値を表示する。\n\t\tcountDownPopup.textContent = countDownPopupNumber;\n\t\t// ゲーム開始宣言の変数を定義する。\n\t\tlet gameStartCallAfterClose = document.getElementById(\"gameStartCall\");\n\t\t// ゲーム開始宣言にclass属性を付与する。\n\t\tgameStartCallAfterClose.className = \"gameStartCallAfterClose\";\n\n\t\t//カウントダウンが0になれば、ゲームを開始する。\n\t\tif (countDownPopupNumber <= 0){\n\t\tclearInterval(timerIdToStart);\n\t\t// カウントダウンポップアップのクラスを変更し、非表示にする。\n\t\tcountDownPopup.className = \"countDownPopupAfterClose\";\n\t\ttypingPlayStart();\n\t\t} else {\n\t\tcountDownPopup.textContent = countDownPopupNumber;\n\t\t}\n\t// カウントダウン文字を１ずつ減らす。\n\tcountDownPopupNumber = countDownPopupNumber - 1;\n  }\n\n\t// ゲームを開始する処理を定義する。\n\tfunction typingPlayStart(){\n\n\t\t// 表示する単語を定義する。\n\t\tconst displayWord = document.getElementById(\"displayWord\");\n\t\tdisplayWord.className =  \"displayWord\";\n\t\tconst displayWordJapanese = document.getElementById(\"displayWordJapanese\");\n\t\tdisplayWordJapanese.className =  \"displayWordJapanese\";\n\t\t// 表示する単語を一文字ずつに分ける変数を定義する。\n\t\tlet charArrayInDisplayWord =[];\n\n\t\t// ゲーム終了を判定するフラグを定義する。\n\t\tlet playEndFlag = \"0\";\n\n\t\t// 表示する単語を作成する。\n\t\tcreateDisplayWord();\n\n\t\t// プレイ開始時間を取得する。\n\t\tconst startTime = Date.now();\n\t\t// 表示する残りのプレイ可能時間を定義する。\n\t\tlet remainPlayingTime = document.getElementById(\"remainPlayingTime\");\n\t\tremainPlayingTime.className =  \"remainPlayingTime\";\n\t\t// 表示するスタート時のプレイ可能時間を定義する。\n\t\tlet initialPlayingTimeMSec = 5000;\n\t\t// スタート時に残りのプレイ可能時間の初期値を表示するためにcountDownTimeを実施する。\n\t\tsetTimeout(countDownTime,0);\n\t\t// 1秒ごとにcountDownTimeを実施するように定義する。\n\t\tconst timerId = setInterval(countDownTime,1000);\n\n\t\t// 正解時に表示する丸を定義する。\n\t\tdocument.getElementById(\"circleImg\").src= '/assets/正解○.png';\n\t\tcircleImg.classList.add('transparent');\n\n\t\t// \"答えを見る\"ボタンを表示する。(プレイモード普通、正確重視の時のみ)\n\t\tif (playMode == \"普通\" || playMode == \"正確重視\" ) {\n\t\t\tlet answerButton = document.getElementById(\"answerButton\");\n\t\t\tanswerButton.innerHTML = \"答えを見る\";\n\t\t\tanswerButton.className = \"answerButton\";\n\t\t\tanswerButton.onclick = function() {\n\t\t\t\tfor (let i = 0; i < charArrayInDisplayWord.length; i++) {\n\t\t\t\t\tcharArrayInDisplayWord[i].classList.remove('transparent');\n\t\t\t\t}\n\t\t\t\tdisplayWord.className =  \"displayWord\";\n\t\t\t};\n\t\t};\n\n\t\t// 表示するスコアを定義する。\n\t\tlet displayScore = document.getElementById(\"displayScore\");\n\t\tdisplayScore.className =  \"displayScore\";\n\t\t// 合計スコアの初期値を定義する。\n\t\tlet totalScore = 0;\n\t\t// 表示するスコアに初期値を定義する。\n\t\tdisplayScore.textContent = totalScore + \" P\";\n\t\t// スコアアップする基準を定義する。\n\t\tconst refTextLengthForCountUpLevel1 = 4;\n\t\tconst addScoreLevel1 = 1000;\n\t\tconst addScoreLevel2 = 3000;\n\n\t\t// タイプされる度にkeyDownCharCountUpを実施するように定義する。\n\t\tdocument.addEventListener(`keydown`, keyDownCharCountUp);\n\n\t\t// 表示する単語を作成する処理を定義する。\n\t\tfunction createDisplayWord(){\n\t\t\t// すでにゲームが終了している場合、新規ワードを生成しない。ゲーム中のみ生成する。\n\t\t\t// ギリギリで問題に正解した場合、○を表示した後、200m秒後にワードを生成する処理が走るため。\n\t\t\tif(playEndFlag === \"0\"){\n\t\t\t\t// 表示単語を初期化する。\n\t\t\t\tdisplayWord.textContent = \"\";\n\t\t\t\t// 0〜textListsの総数間で整数値をランダムで算出する。\n\t\t\t\tlet randomIntegerInTotalWordList = Math.floor(Math.random() * wordList.length);\n\t\t\t\t// 表示する単語をランダムで選定する。\n\t\t\t\tdisplayWordInList = wordList[randomIntegerInTotalWordList];\n\n\t\t\t\t// 表示する単語の日本語訳を表示させる。\n\t\t\t\tdisplayWordJapanese.textContent = displayWordInList.jap_trans_1;\n\t\t\t\t// 表示する単語を一文字ごとに区切り、spanタグで閉じる。\n\t\t\t\t// spanタグで閉じた単語を表示する。\n\t\t\t\tcharArrayInDisplayWord = displayWordInList.eng_word.split(\"\").map(function(value){\n\t\t\t\t\t// spanタグを作成する。\n\t\t\t\t\tlet spanValue = document.createElement(\"span\");\n\t\t\t\t\t// spanタグに一文字を挿入する。\n\t\t\t\t\tspanValue.textContent = value;\n\t\t\t\t\t// 各アルファベットに対して、transparentクラスを付与する。（プレイモード普通、正確重視のときのみ）\n\t\t\t\t\tif ( playMode == \"普通\" || playMode == \"正確重視\") {\n\t\t\t\t\t\tspanValue.className = \"transparent\";\n\t\t\t\t\t};\n\t\t\t\t\t// 表示する単語にspanタグで閉じた一文字を追加する。\n\t\t\t\t\tdisplayWord.appendChild(spanValue);\n\t\t\t\t\treturn spanValue;\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\t// プレイ時間をカウントダウンする処理を定義する。\n\t\tfunction countDownTime(){\n\t\t\tconst currentTime = Date.now();\n\t\t\tconst diffBetweenCurrentTimeAndStartTime = currentTime - startTime;\n\t\t\tconst remainMSec = initialPlayingTimeMSec - diffBetweenCurrentTimeAndStartTime;\n\t\t\tconst remainSec = Math.ceil(remainMSec/1000);\n\t\t\tlet  remainSecLabel = `残り${(`00${remainSec}` ).slice( -3 )}秒`;\n\t\t\tif (remainMSec <= 0){\n\t\t\t\t// ゲーム終了後にplayEndFlagを1に更新する。\n\t\t\t\tplayEndFlag = \"1\";\n\t\t\t\t// プレイ時間のカウントダウンを止める。\n\t\t\t\tclearInterval(timerId);\n\t\t\t\t// 残り時間の表示を消す。\n\t\t\t\tremainSecLabel = \"\";\n\t\t\t\t// 現在のスコア（左上）の表示を消す。\n\t\t\t\tdisplayScore.textContent =\"\";\n\t\t\t\t// 問題の英単語の表示を消す。\n\t\t\t\tdisplayWord.textContent =\"\";\n\t\t\t\t// 解答の日本語の表示を消す。\n\t\t\t\tdisplayWordJapanese.textContent =\"\";\n\t\t\t\t// 答えを見るボタンを消す。（プレイモード普通、正確重視の時のみ）\n\t\t\t\tif (playMode == \"普通\" || playMode == \"正確重視\") {\n\t\t\t\t\tanswerButton.remove();\n\t\t\t\t};\n\t\t\t\t// 正解時に表示される○の画像を消す。\n\t\t\t\tcircleImg.remove();\n\n\t\t\t\t// ゲーム終了後に終了を知らせるポップアップを作成する。\n\t\t\t\t// ゲーム終了を知らせるポップアップを定義する。\n\t\t\t\tconst closePopup = document.getElementById(\"closePopup\");\n\t\t\t\tclosePopup.textContent =\"終了\";\n\t\t\t\tclosePopup.className = \"closePopup\";\n\t\t\t\t// 戻るボタンを定義する。\n\t\t\t\tconst backBtn = document.getElementById(\"backBtn\");\n\t\t\t\t// もう一度ボタンを定義する。\n\t\t\t\tconst restartBtn = document.getElementById(\"restartBtn\");\n\t\t\t\t// 2秒後に得点を表示させる。また、もう一度ボタンと戻るボタンを表示させる。\n\t\t\t\tsetTimeout(function(){\n\t\t\t\tclosePopup.textContent = `あなたの得点は${totalScore.toLocaleString()}点です!`;\n\t\t\t\tclosePopup.className = \"endResultPopup\";\n\t\t\t\trestartBtn.addEventListener('click', function gameReStart(){\n\t\t\t\t\tclosePopup.className = \"endResultPopupAfterClose\";\n\t\t\t\t\trestartBtn.className = \"restartBtnAfterClose\";\n\t\t\t\t\tbackBtn.className = \"backBtnAfterClose\";\n\t\t\t\t\tgameStart();\n\t\t\t\t});\n\t\t\t\trestartBtn.innerHTML = \"<a href='./typingplay_eng'>もう一度遊ぶ</a>\";\n\t\t\t\trestartBtn.className = \"restartBtn\";\n\t\t\t\tbackBtn.innerHTML = \"<a href='./typingplay_index'>コース選択画面に戻る</a>\";\n\t\t\t\tbackBtn.className = \"backBtn\";\n\t\t\t\t},2000);\n\t\t\t}\n\t\t\t// 残りプレイ可能時間を更新する。\n\t\t\tremainPlayingTime.textContent = remainSecLabel;\n\t\t};\n\n\t\t// スコアをアップし、現在のtotalScoreを表示する処理を定義する。\n\t\tfunction countUpScore(){\n\t\tif (displayWord.textContent.length < refTextLengthForCountUpLevel1){\n\t\t\taddPoint = addScoreLevel1;\n\t\t} else {\n\t\t\taddPoint = addScoreLevel2;\n\t\t}\n\t\ttotalScore = totalScore + addPoint;\n\t\tdisplayScore.textContent = `${totalScore.toLocaleString()} P`;\n\t\treturn totalScore;\n\t\t}\n\n\t\t// ゲーム中にタイプした文字が表示文字と一致する場合、不一致の場合の処理を定義する。\n\t\tfunction keyDownCharCountUp(keyDownChar){\n\t\t\tif(keyDownChar.key === charArrayInDisplayWord[0].textContent && playEndFlag===\"0\") {\n\t\t\t\tcorrectTyping();\n\t\t\t} else if (playEndFlag===\"0\") {\n\t\t\t\t// タイプミスでメーターを初期値に戻す。\n\t\t\t\tbonusCountReset();\n\t\t\t} else {\n\n\t\t\t};\n\t\t};\n\n\t\t// タイプした文字が表示文字と一致する場合の処理を定義する。\n\t\tfunction correctTyping(){\n\t\t\t// 文字色を変更する。\n\t\t\tcharArrayInDisplayWord[0].className = \"add_red\";\n\t\t\t// メーターを更新する。\n\t\t\tbonusCountMeter = bonusCountMeter +1;\n\t\t\t// 一致した文字を配列から削除する。\n\t\t\tcharArrayInDisplayWord.shift();\n\t\t\t// 表示文字全てタイプした場合、スコアアップ処理を実施し、次の表示文字を作成する処理を実施する。\n\t\t\tif(charArrayInDisplayWord.length === 0) {\n\t\t\t\tcountUpScore();\n\t\t\t\tcircleImg.classList.add('circle');\n\t\t\t\tcircleImg.classList.remove('transparent');\n\t\t\t\tsetTimeout(createDisplayWord,200);\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tcircleImg.classList.add('transparent');\n\t\t\t\t\tcircleImg.classList.remove('circle');\n\t\t\t\t}, 200);\n\t\t\t};\n\n\t\t\t// メーターがメーター最大値以上になった場合、メーターを初期化し、プレイ可能時間を延長する。\n\t\t\tif(bonusCountMeter >= bonusCountMeterMax){\n\t\t\tbonusCountMeter = 0;\n\t\t\t// 初期プレイ時間を更新することで、残りプレイ可能時間を延長する。\n\t\t\tinitialPlayingTimeMSec = initialPlayingTimeMSec +bonusAddPlayTime;\n\t\t\t// 延長した残りプレイ時間を表示する。\n\t\t\tdisplayBonusAddPlayTime.textContent = \"+ \" + Math.ceil(bonusAddPlayTime/1000) + \"秒\";\n\t\t\t// 延長した残りプレイ時間をフェードアウトする。\n\t\t\tdisplayBonusAddPlayTime.classList.add('fadeout');\n\t\t\t// fadeoutのclassを取り除くことで、2回目以降も延長した残りプレイ時間が表示されるようにする。\n\t\t\tsetTimeout(function(){\n\t\t\t\tdisplayBonusAddPlayTime.textContent = \"\";\n\t\t\t\tdisplayBonusAddPlayTime.classList.remove('fadeout');\n\t\t\t}, 2000);\n\t\t\t};\n\n\t\t\t// 更新したメーターを表示する。\n\t\t\tdocument.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n\t\t};\n\n\t\t// タイプした文字が表示文字と不一致の場合の処理を定義する。（プレイモードが正確重視の場合のみ）\n\t\t// 不正解の単語の答えを表示し、次の単語を生成する処理。\n\t\t// メーターを0にリセットする処理。\n\t\tfunction bonusCountReset(){\n\t\t\tif (playMode == \"正確重視\") {\n\n\t\t\t\tcreateDisplayWord();\n\t\t\t\tbonusCountMeter = 0;\n\t\t\t\tdocument.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n\t\t\t};\n\t\t};\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}