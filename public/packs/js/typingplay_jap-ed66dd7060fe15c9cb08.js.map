{"version":3,"file":"js/typingplay_jap-ed66dd7060fe15c9cb08.js","sources":["webpack:///webpack/bootstrap","webpack:///./app/javascript/packs/typingplay_jap.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app/javascript/packs/typingplay_jap.js\");\n","window.addEventListener('load', function(){\n\n  // 表示する単語リストを定義する。\n  // chromeの場合\"ff\"が正常に動作しない。\n\n  const wordList = gon.wordListAll;\n\n  // 表示するメーターリストを定義する。\n  const imgArray =[\n    '/assets/メーターPNG/メーター0.png',\n    '/assets/メーターPNG/メーター10.png',\n    '/assets/メーターPNG/メーター20.png',\n    '/assets/メーターPNG/メーター30.png',\n    '/assets/メーターPNG/メーター40.png',\n    '/assets/メーターPNG/メーター50.png',\n    '/assets/メーターPNG/メーター60.png',\n    '/assets/メーターPNG/メーター70.png',\n    '/assets/メーターPNG/メーター80.png',\n    '/assets/メーターPNG/メーター90.png',\n    '/assets/メーターPNG/メーター100.png'\n  ]\n\n\n  const romaMappingTable = {\n    \"あ\":\"a\",\n    \"い\":\"i\",\n    \"う\":\"u\",\n    \"え\":\"e\",\n    \"お\":\"o\",\n    \"か\":\"ka\",\n    \"き\":\"ki\",\n    \"く\":\"ku\",\n    \"け\":\"ke\",\n    \"こ\":\"ko\",\n    \"さ\":\"sa\",\n    \"し\":\"si\",\n    \"す\":\"su\",\n    \"せ\":\"se\",\n    \"そ\":\"so\",\n    \"た\":\"ta\",\n    \"ち\":\"ti\",\n    \"つ\":\"tu\",\n    \"て\":\"te\",\n    \"と\":\"to\",\n    \"な\":\"na\",\n    \"に\":\"ni\",\n    \"ぬ\":\"nu\",\n    \"ね\":\"ne\",\n    \"の\":\"no\",\n    \"は\":\"ha\",\n    \"ひ\":\"hi\",\n    \"ふ\":\"hu\",\n    \"へ\":\"he\",\n    \"ほ\":\"ho\",\n    \"ま\":\"ma\",\n    \"み\":\"mi\",\n    \"む\":\"mu\",\n    \"め\":\"me\",\n    \"も\":\"mo\",\n    \"や\":\"ya\",\n    \"ゆ\":\"yu\",\n    \"よ\":\"yo\",\n    \"ら\":\"ra\",\n    \"り\":\"ri\",\n    \"る\":\"ru\",\n    \"れ\":\"re\",\n    \"ろ\":\"ro\",\n    \"わ\":\"wa\",\n    \"を\":\"wo\",\n    \"ん\":\"nn\",\n    \"が\":\"ga\",\n    \"ぎ\":\"gi\",\n    \"ぐ\":\"gu\",\n    \"げ\":\"ge\",\n    \"ご\":\"go\",\n    \"ざ\":\"za\",\n    \"じ\":\"zi\",\n    \"ず\":\"zu\",\n    \"ぜ\":\"ze\",\n    \"ぞ\":\"zo\",\n    \"だ\":\"da\",\n    \"ぢ\":\"di\",\n    \"づ\":\"du\",\n    \"で\":\"de\",\n    \"ど\":\"do\",\n    \"ば\":\"ba\",\n    \"び\":\"bi\",\n    \"ぶ\":\"bu\",\n    \"べ\":\"be\",\n    \"ぼ\":\"bo\",\n    \"ぱ\":\"pa\",\n    \"ぴ\":\"pi\",\n    \"ぷ\":\"pu\",\n    \"ぺ\":\"pe\",\n    \"ぽ\":\"po\",\n    \"ぁ\":\"la\",\n    \"ぃ\":\"li\",\n    \"ぅ\":\"lu\",\n    \"ぇ\":\"le\",\n    \"ぉ\":\"lo\",\n    \"ゃ\":\"lya\",\n    \"ゅ\":\"lyu\",\n    \"ょ\":\"lyo\",\n    \"でゃ\":\"dha\",\n    \"でぃ\":\"dhi\",\n    \"でゅ\":\"dhu\",\n    \"でぇ\":\"dhe\",\n    \"でょ\":\"dho\",\n    \"つぁ\":\"tsa\",\n    \"つぃ\":\"tsi\",\n    \"つぇ\":\"tse\",\n    \"つぉ\":\"tso\",\n    \"てゃ\":\"tha\",\n    \"てぃ\":\"thi\",\n    \"てゅ\":\"thu\",\n    \"てぇ\":\"the\",\n    \"てょ\":\"tho\",\n    \"ふぁ\":\"fa\",\n    \"ふぃ\":\"fi\",\n    \"ふぇ\":\"fe\",\n    \"ふぉ\":\"fo\",\n    \"うぁ\":\"wha\",\n    \"うぃ\":\"wi\",\n    \"うぇ\":\"we\",\n    \"うぉ\":\"who\",\n    \"ゔぁ\":\"va\",\n    \"ゔぃ\":\"vi\",\n    \"ゔ\":\"vu\",\n    \"ゔぇ\":\"ve\",\n    \"ゔぉ\":\"vo\",\n    \"きゃ\":\"kya\",\n    \"きぃ\":\"kyi\",\n    \"きゅ\":\"kyu\",\n    \"きぇ\":\"kye\",\n    \"きょ\":\"kyo\",\n    \"ぎゃ\":\"gya\",\n    \"ぎぃ\":\"gyi\",\n    \"ぎゅ\":\"gyu\",\n    \"ぎぇ\":\"gye\",\n    \"ぎょ\":\"gyo\",\n    \"しゃ\":\"sya\",\n    \"しぃ\":\"syi\",\n    \"しゅ\":\"syu\",\n    \"しぇ\":\"sye\",\n    \"しょ\":\"syo\",\n    \"じゃ\":\"zya\",\n    \"じぃ\":\"zyi\",\n    \"じゅ\":\"zyu\",\n    \"じぇ\":\"zye\",\n    \"じょ\":\"zyo\",\n    \"ちゃ\":\"tya\",\n    \"ちぃ\":\"tyi\",\n    \"ちゅ\":\"tyu\",\n    \"ちぇ\":\"tye\",\n    \"ちょ\":\"tyo\",\n    \"ぢゃ\":\"dya\",\n    \"ぢぃ\":\"dyi\",\n    \"ぢゅ\":\"dyu\",\n    \"ぢぇ\":\"dye\",\n    \"ぢょ\":\"dyo\",\n    \"にゃ\":\"nya\",\n    \"にぃ\":\"nyi\",\n    \"にゅ\":\"nyu\",\n    \"にぇ\":\"nye\",\n    \"にょ\":\"nyo\",\n    \"ひゃ\":\"hya\",\n    \"ひぃ\":\"hyi\",\n    \"ひゅ\":\"hyu\",\n    \"ひぇ\":\"hye\",\n    \"ひょ\":\"hyo\",\n    \"びゃ\":\"bya\",\n    \"びぃ\":\"byi\",\n    \"びゅ\":\"byu\",\n    \"びぇ\":\"bye\",\n    \"びょ\":\"byo\",\n    \"ぴゃ\":\"pya\",\n    \"ぴぃ\":\"pyi\",\n    \"ぴゅ\":\"pyu\",\n    \"ぴぇ\":\"pye\",\n    \"ぴょ\":\"pyo\",\n    \"ふゃ\":\"fya\",\n    \"ふぃ\":\"fyi\",\n    \"ふゅ\":\"fyu\",\n    \"ふぇ\":\"fye\",\n    \"ふょ\":\"fyo\",\n    \"みゃ\":\"mya\",\n    \"みぃ\":\"myi\",\n    \"みゅ\":\"myu\",\n    \"みぇ\":\"mye\",\n    \"みょ\":\"myo\",\n    \"りゃ\":\"rya\",\n    \"りぃ\":\"ryi\",\n    \"りゅ\":\"ryu\",\n    \"りぇ\":\"rye\",\n    \"りょ\":\"ryo\",\n    \"くぁ\":\"kwa\",\n    \"ぐぁ\":\"gwa\",\n    \"とぅ\":\"twu\",\n    \"どぅ\":\"dwu\",\n    \"いぇ\":\"ye\"\n  }\n\n  const romaMappingTableSecond = {\n    \"い\":\"yi\",\n    \"か\":\"ca\",\n    \"く\":\"cu\",\n    \"こ\":\"co\",\n    \"し\":\"shi\",\n    \"せ\":\"ce\",\n    \"ち\":\"chi\",\n    \"つ\":\"tsu\",\n    \"ふ\":\"fu\",\n    \"じ\":\"ji\",\n    \"ぁ\":\"xa\",\n    \"ぃ\":\"xi\",\n    \"ぅ\":\"xu\",\n    \"ぇ\":\"xe\",\n    \"ぉ\":\"xo\",\n    \"ゃ\":\"xya\",\n    \"ゅ\":\"xyu\",\n    \"ょ\":\"xyo\",\n    \"しゃ\":\"sha\",\n    \"しゅ\":\"shu\",\n    \"しぇ\":\"she\",\n    \"しょ\":\"sho\",\n    \"じゃ\":\"ja\",\n    \"じぃ\":\"jyi\",\n    \"じゅ\":\"ju\",\n    \"じぇ\":\"je\",\n    \"じょ\":\"jo\",\n    \"ちゃ\":\"cha\",\n    \"ちぃ\":\"cyi\",\n    \"ちゅ\":\"chu\",\n    \"ちぇ\":\"che\",\n    \"ちょ\":\"cho\",\n    \"うぃ\":\"whi\",\n    \"うぇ\":\"whe\",\n    \"ん\":\"xn\"\n  }\n\n  const romaMappingTableThird = {\n    \"し\":\"ci\",\n    \"じゃ\":\"jya\",\n    \"じゅ\":\"jyu\",\n    \"じぇ\":\"jye\",\n    \"じょ\":\"jyo\",\n    \"ちゃ\":\"cya\",\n    \"ちゅ\":\"cyu\",\n    \"ちぇ\":\"cye\",\n    \"ちょ\":\"cyo\",\n  }\n    \n\n  // 表示するメーター初期値を定義する。\n  let bonusCountMeter = 0;\n  // 表示するメーター最大値を定義する。\n  const bonusCountMeterMax = 10;\n  // メーターの初期値を表示する。\n  document.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n  // 表示するプレイ延長時間を定義する。\n  const displayBonusAddPlayTime = document.getElementById(\"displayBonusAddPlayTime\");\n  displayBonusAddPlayTime.className =  \"displayBonusAddPlayTime\";\n  // メーター最大値に達した際の延長するプレイ時間を定義する。\n  const bonusAddPlayTime = 3000;\n\n\n  // ゲーム開始までをカウントダウン変数を定義する。\n  let countDownPopup = document.getElementById(\"countDownPopup\");\n  // class属性を付与する。\n  countDownPopup.className = \"countDownPopup\";\n  // ゲーム開始までをカウントダウン変数の初期値を定義する。\n  let countDownPopupNumber = 3;\n  // ゲーム開始までをカウントダウン変数の初期値を表示する。\n  countDownPopup.textContent = countDownPopupNumber;\n  // ゲーム開始までをカウントダウンを1秒ごとに実施するように定義する。\n  const timerIdToStart = setInterval(countDownTimeToStart,1000);\n\n\n  // ゲーム開始までをカウントダウンを実施する処理を定義する。\n  function countDownTimeToStart(){\n    countDownPopupNumber = countDownPopupNumber - 1;\n    if (countDownPopupNumber <= 0){\n      clearInterval(timerIdToStart);\n      countDownPopup.remove();\n      typingPlayStart();\n    } else {\n      countDownPopup.textContent = countDownPopupNumber;\n    }\n  }\n\n  // ゲームを開始する処理を定義する。\n  function typingPlayStart(){\n\n    // 表示する単語を定義する。\n    const displayWord = document.getElementById(\"displayWord\");\n    displayWord.className =  \"displayWord\";\n    const displayWordEnglish = document.getElementById(\"displayWordEnglish\");\n    displayWordEnglish.className =  \"displayWordEnglish\";\n    // 表示する単語を一文字ずつに分ける変数を定義する。\n    let charArrayInDisplayWordJap =[];\n    // 表示する単語を作成する。\n    createDisplayWord();\n\n    // プレイ開始時間を取得する。\n    const startTime = Date.now();\n    // 表示する残りのプレイ可能時間を定義する。\n    let remainPlayingTime = document.getElementById(\"remainPlayingTime\");\n    remainPlayingTime.className =  \"remainPlayingTime\";\n    // 表示するスタート時のプレイ可能時間を定義する。\n    let initialPlayingTimeMSec = 120000;\n    // スタート時に残りのプレイ可能時間の初期値を表示するためにcountDownTimeを実施する。\n    setTimeout(countDownTime,0);\n    // 1秒ごとにcountDownTimeを実施するように定義する。\n    const timerId = setInterval(countDownTime,1000);\n\n    // 表示するスコアを定義する。\n    let displayScore = document.getElementById(\"displayScore\");\n    displayScore.className =  \"displayScore\";\n    // 合計スコアの初期値を定義する。\n    let totalScore = 0;\n    // 表示するスコアに初期値を定義する。\n    displayScore.textContent = totalScore + \" P\";\n    // スコアアップする基準を定義する。\n    const refTextLengthForCountUpLevel1 = 4;\n    const addScoreLevel1 = 1000;\n    const addScoreLevel2 = 3000;\n\n    // タイプされる度にkeyDownCharCountUpを実施するように定義する。\n    document.addEventListener(`keydown`, keyDownCharCountUp);\n\n    // ゲーム終了を判定するフラグを定義する。\n    let playEndFlag = \"0\";\n\n    // 表示する単語を作成する処理を定義する。\n    function createDisplayWord(){\n      // 表示単語を初期化する。\n      displayWord.textContent = \"\";\n      // 0〜textListsの総数間で整数値をランダムで算出する。\n      let randomIntegerInTotalWordList = Math.floor(Math.random() * wordList.length);\n      // 表示する単語をランダムで選定する。\n      displayWordInList = wordList[randomIntegerInTotalWordList];\n\n      // 英単語を表示させる。\n      displayWordEnglish.textContent = displayWordInList.eng_word;\n      // 表示する単語を一文字ごとに区切り、spanタグで閉じる。\n      // spanタグで閉じた単語を表示する。\n      charArrayInDisplayWordJap = displayWordInList.jap_trans_1_yomi.split(\"\").map(function(value){\n        // spanタグを作成する。\n        let spanValue = document.createElement(\"span\");\n        // spanタグに一文字を挿入する。\n        spanValue.textContent = value;\n        // 表示する単語にspanタグで閉じた一文字を追加する。\n        displayWord.appendChild(spanValue);\n        return spanValue;\n      });\n    }\n\n    // プレイ時間をカウントダウンする処理を定義する。\n    function countDownTime(){\n      const currentTime = Date.now();\n      const diffBetweenCurrentTimeAndStartTime = currentTime - startTime;\n      const remainMSec = initialPlayingTimeMSec - diffBetweenCurrentTimeAndStartTime;\n      const remainSec = Math.ceil(remainMSec/1000);\n      let  remainSecLabel = `残り${(`00${remainSec}` ).slice( -3 )}秒`;\n      if (remainMSec <= 0){\n        clearInterval(timerId);\n        remainSecLabel = \"\";\n        displayScore.textContent =\"\";\n        displayWord.textContent =\"\";\n        displayWordEnglish.textContent =\"\";\n        // ゲーム終了後にplayEndFlagを1に更新する。\n        playEndFlag = \"1\";\n        // ゲーム終了後に終了を知らせるポップアップを作成する。\n        // ゲーム終了を知らせるポップアップを定義する。\n        const closePopup = document.getElementById(\"closePopup\");\n        closePopup.textContent =\"終了\";\n        closePopup.className = \"closePopup\";\n        // 戻るボタンを定義する。\n        const backBtn = document.getElementById(\"backBtn\");\n        // もう一度ボタンを定義する。\n        const restartBtn = document.getElementById(\"restartBtn\");\n        // 2秒後に得点を表示させる。また、もう一度ボタンと戻るボタンを表示させる。\n        setTimeout(function(){\n          closePopup.textContent = `あなたの得点は${totalScore.toLocaleString()}点です!`;\n          closePopup.className = \"endResultPopup\";\n          restartBtn.innerHTML = \"<a href='../'>もう一度遊ぶ</a>\";\n          restartBtn.className = \"restartBtn\";\n          backBtn.innerHTML = \"<a href='../'>タイトルに戻る</a>\";\n          backBtn.className = \"backBtn\";\n        },2000);\n      }\n      // 残りプレイ可能時間を更新する。\n      remainPlayingTime.textContent = remainSecLabel;\n    }\n\n    // スコアをアップし、現在のtotalScoreを表示する処理を定義する。\n    function countUpScore(){\n      if (displayWord.textContent.length < refTextLengthForCountUpLevel1){\n        addPoint = addScoreLevel1;\n      } else {\n        addPoint = addScoreLevel2;\n      }\n      totalScore = totalScore + addPoint;\n      displayScore.textContent = `${totalScore.toLocaleString()} P`;\n      return totalScore;\n    }\n\n    let charArrayInDisplayWordAlpha = [];\n    let charArrayInDisplayWordAlphaSole = [];\n    let charArrayInDisplayWordAlphaSecond = [];\n    let charArrayInDisplayWordAlphaSoleSecond = [];\n    let charArrayInDisplayWordAlphaThird = [];\n    let charArrayInDisplayWordAlphaSoleThird = [];\n\n    let shiftAlreadyStartedFlag = 0;\n    let shiftAlreadyStartedFlagSoleSecondThird = 0;\n    let keyTempForSmallTsuSoleFlag = 0;\n\n    let keyTempForSmallTsu = \"\";\n\n    // タイプした文字が表示文字と一致する場合の処理を定義する。\n    function keyDownCharCountUp(keyDownChar){\n        // 最後の文字でない場合\n        if(charArrayInDisplayWordJap[1] != null){\n            // 2文字目が小さい文字である場合(\"っ\"は除く)\n            if (charArrayInDisplayWordJap[1].textContent === \"ぁ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ぃ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ぅ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ぇ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ぉ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ゃ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ゅ\"\n              || charArrayInDisplayWordJap[1].textContent === \"ょ\") {\n                \n                let wordLetter = charArrayInDisplayWordJap[0].textContent + charArrayInDisplayWordJap[1].textContent;\n                let wordLetterSole = charArrayInDisplayWordJap[0].textContent;\n\n                if (shiftAlreadyStartedFlag === 0 ){\n                  charArrayInDisplayWordAlpha = romaMappingTable[wordLetter].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                  charArrayInDisplayWordAlphaSole = romaMappingTable[wordLetterSole].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                };\n\n                if(keyDownChar.key === charArrayInDisplayWordAlpha[0].textContent\n                    || keyDownChar.key === charArrayInDisplayWordAlphaSole[0].textContent){\n\n                    if(keyDownChar.key === charArrayInDisplayWordAlpha[0].textContent) {\n                      charArrayInDisplayWordAlpha.shift();\n                      shiftAlreadyStartedFlag = 1;\n                        if(charArrayInDisplayWordAlpha.length === 0){\n                          charArrayInDisplayWordJap[0].className = \"add_red\";\n                          charArrayInDisplayWordJap[1].className = \"add_red\";\n                          charArrayInDisplayWordJap.shift();\n                          charArrayInDisplayWordJap.shift();\n                          shiftAlreadyStartedFlag = 0;\n                        };\n                    };\n                      if(keyDownChar.key === charArrayInDisplayWordAlphaSole[0].textContent) {\n                        charArrayInDisplayWordAlphaSole.shift();\n                        shiftAlreadyStartedFlag = 1;\n                          if(charArrayInDisplayWordAlphaSole.length === 0){\n                            charArrayInDisplayWordJap[0].className = \"add_red\";\n                            charArrayInDisplayWordJap.shift();\n                            shiftAlreadyStartedFlag = 0;\n                          };\n                      };\n                      correctTyping();\n                } else {\n                  bonusCountReset();\n                };\n            \n            // 先頭が母音の場合\n            } else if (charArrayInDisplayWordJap[0].textContent === \"あ\"\n              || charArrayInDisplayWordJap[0].textContent === \"い\"\n              || charArrayInDisplayWordJap[0].textContent === \"う\"\n              || charArrayInDisplayWordJap[0].textContent === \"え\"\n              || charArrayInDisplayWordJap[0].textContent === \"お\" ) {\n\n                let wordLetter = charArrayInDisplayWordJap[0].textContent;\n\n                if (shiftAlreadyStartedFlag === 0 ){\n                    if (keyDownChar.key === romaMappingTable[wordLetter]) {\n                        charArrayInDisplayWordJap[0].className = \"add_red\";\n                        charArrayInDisplayWordJap.shift();\n                        correctTyping();\n                    } else {\n                        bonusCountReset();\n                    };\n                };\n\n            // 小さい\"っ\"の場合\n            } else if (charArrayInDisplayWordJap[0].textContent === \"っ\") {\n                if (keyDownChar.key !== \"a\"\n                    && keyDownChar.key !== \"i\"\n                    && keyDownChar.key !== \"u\"\n                    && keyDownChar.key !== \"e\"\n                    && keyDownChar.key !== \"o\"\n                    && keyDownChar.key !== \"n\") {\n                        if (shiftAlreadyStartedFlag === 0 ){\n                          keyTempForSmallTsu = keyDownChar.key;\n                          shiftAlreadyStartedFlag = 1;\n                        } else {\n                            if(keyDownChar.key === keyTempForSmallTsu){\n                              charArrayInDisplayWordJap[0].className = \"add_red\";\n                              charArrayInDisplayWordJap.shift();\n                              shiftAlreadyStartedFlag = 0;\n                              keyDownCharCountUp(keyDownChar);\n                              correctTyping();\n                            } else {\n                              keyTempForSmallTsu = keyDownChar.key;\n                              bonusCountReset();\n                            };\n                        };\n                };\n            \n          // \"ん\"の場合、かつ次の入力文字が母音でない場合は\"n\"+\"n以外の子音\"でもOKとする。\n            } else if (charArrayInDisplayWordJap[0].textContent === \"ん\"\n                          && charArrayInDisplayWordJap[1].textContent !== \"あ\"\n                          && charArrayInDisplayWordJap[1].textContent !== \"い\"\n                          && charArrayInDisplayWordJap[1].textContent !== \"う\"\n                          && charArrayInDisplayWordJap[1].textContent !== \"え\"\n                          && charArrayInDisplayWordJap[1].textContent !== \"お\"\n                          && shiftAlreadyStartedFlag === 1){\n                let wordLetter = charArrayInDisplayWordJap[0].textContent;\n                if(keyDownChar.key !== \"a\"\n                    && keyDownChar.key !== \"i\"\n                    && keyDownChar.key !== \"u\"\n                    && keyDownChar.key !== \"e\"\n                    && keyDownChar.key !== \"o\"){\n                  charArrayInDisplayWordAlpha.shift();\n                  charArrayInDisplayWordJap[0].className = \"add_red\";\n                  charArrayInDisplayWordJap.shift();\n                  shiftAlreadyStartedFlag = 0;\n                  keyDownCharCountUp(keyDownChar);\n                  correctTyping();\n                } else {\n                  bonusCountReset();\n                };\n            \n            // 上記以外の文字の場合\n            } else {\n              let wordLetter = charArrayInDisplayWordJap[0].textContent;\n                  // ローマ字変換の複数パターンをsplitする。\n              if (shiftAlreadyStartedFlag === 0 ){\n                  // ローマ字変換パターン１をsplitする。\n                  charArrayInDisplayWordAlpha = romaMappingTable[wordLetter].split(\"\").map(function(value){\n                  let spanValue = document.createElement(\"span\");\n                  spanValue.textContent = value;\n                  return spanValue;\n                });\n                  // ローマ字変換パターン２が存在する場合はsplitする。\n                  if (romaMappingTableSecond[wordLetter] != null){\n                    charArrayInDisplayWordAlphaSecond = romaMappingTableSecond[wordLetter].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                };\n                  // ローマ字変換パターン３が存在する場合はsplitする。\n                  if (romaMappingTableThird[wordLetter] != null){\n                    charArrayInDisplayWordAlphaThird = romaMappingTableThird[wordLetter].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                };\n              };\n              // タイプキーがローマ字変換パターン１に該当する場合\n              if(keyDownChar.key === charArrayInDisplayWordAlpha[0].textContent) {\n                  charArrayInDisplayWordAlpha.shift();\n                  shiftAlreadyStartedFlag = 1;\n                  shiftAlreadyStartedFlagSoleSecondThird = 1;\n                  if(charArrayInDisplayWordAlpha.length === 0){\n                    charArrayInDisplayWordJap[0].className = \"add_red\";\n                    charArrayInDisplayWordJap.shift();\n                    shiftAlreadyStartedFlag = 0;\n                  }};\n              // タイプキーがローマ字変換パターン２に該当する場合\n              if (romaMappingTableSecond[wordLetter] != null){\n                  if(keyDownChar.key === charArrayInDisplayWordAlphaSecond[0].textContent\n                      && charArrayInDisplayWordAlpha.length !== 0){\n                    charArrayInDisplayWordAlphaSecond.shift();\n                    shiftAlreadyStartedFlag = 1;\n                    shiftAlreadyStartedFlagSoleSecondThird = 1;\n                    if(charArrayInDisplayWordAlphaSecond.length === 0){\n                      charArrayInDisplayWordJap[0].className = \"add_red\";\n                      charArrayInDisplayWordJap.shift();\n                      shiftAlreadyStartedFlag = 0;\n                  }}};\n              // タイプキーがローマ字変換パターン３に該当する場合\n              if (romaMappingTableThird[wordLetter] != null){\n                  if(keyDownChar.key === charArrayInDisplayWordAlphaThird[0].textContent\n                    && charArrayInDisplayWordAlpha.length !== 0\n                    && charArrayInDisplayWordAlphaSecond.length !== 0){\n                    charArrayInDisplayWordAlphaThird.shift();\n                    shiftAlreadyStartedFlag = 1;\n                    shiftAlreadyStartedFlagSoleSecondThird = 1;\n                    if(charArrayInDisplayWordAlphaThird.length === 0){\n                      charArrayInDisplayWordJap[0].className = \"add_red\";\n                      charArrayInDisplayWordJap.shift();\n                      shiftAlreadyStartedFlag = 0;\n                    }}};\n              // タイプキーがローマ字変換パターン１〜３のいずれかに該当する場合\n              if (shiftAlreadyStartedFlagSoleSecondThird === 1) {\n                correctTyping(); \n                shiftAlreadyStartedFlagSoleSecondThird = 0;\n              } else {\n                bonusCountReset();\n              };\n            };;\n        \n        // 最後の文字である場合\n        // 母音である場合\n        } else if (charArrayInDisplayWordJap[0].textContent === \"あ\"\n          || charArrayInDisplayWordJap[0].textContent === \"い\"\n          || charArrayInDisplayWordJap[0].textContent === \"う\"\n          || charArrayInDisplayWordJap[0].textContent === \"え\"\n          || charArrayInDisplayWordJap[0].textContent === \"お\" ) {\n          let wordLetter = charArrayInDisplayWordJap[0].textContent;\n              if (shiftAlreadyStartedFlag === 0 ) {\n                  if (keyDownChar.key === romaMappingTable[wordLetter]){\n                      charArrayInDisplayWordJap[0].className = \"add_red\";\n                      charArrayInDisplayWordJap.shift();\n                      correctTyping();\n                    } else {\n                      bonusCountReset();\n                    };\n              };\n        \n        // 小さい\"っ\"の場合\n        } else if (charArrayInDisplayWordJap[0].textContent === \"っ\") {\n            if (keyDownChar.key !== \"a\"\n                && keyDownChar.key !== \"i\"\n                && keyDownChar.key !== \"u\"\n                && keyDownChar.key !== \"e\"\n                && keyDownChar.key !== \"o\"\n                && keyDownChar.key !== \"n\") {\n                    if (shiftAlreadyStartedFlag === 0 ) {\n                      keyTempForSmallTsu = keyDownChar.key;\n                      shiftAlreadyStartedFlag = 1;\n                    } else {\n                        if(keyDownChar.key === keyTempForSmallTsu) {\n                          keyTempForSmallTsu = \"\";\n                          charArrayInDisplayWordJap[0].className = \"add_red\";\n                          charArrayInDisplayWordJap.shift();\n                          shiftAlreadyStartedFlag = 0;\n                          correctTyping();\n                        } else if ((keyTempForSmallTsu === \"l\" || keyTempForSmallTsu === \"x\")\n                                    && keyDownChar.key === \"t\") {\n                                      keyTempForSmallTsu = keyDownChar.key;\n                                      keyTempForSmallTsuSoleFlag = 1;\n                                      correctTyping();\n                        } else if(keyTempForSmallTsu === \"t\" && keyDownChar.key === \"s\"){\n                                      keyTempForSmallTsu = keyDownChar.key;\n                                      correctTyping();\n                        } else {\n                          keyTempForSmallTsu = keyDownChar.key;\n                          bonusCountReset();\n                        };\n                    };\n            } else if (keyTempForSmallTsuSoleFlag === 1\n                      && keyDownChar.key === \"u\"){\n                        keyTempForSmallTsu = \"\";\n                        charArrayInDisplayWordJap[0].className = \"add_red\";\n                        charArrayInDisplayWordJap.shift();\n                        shiftAlreadyStartedFlag = 0;\n                        keyTempForSmallTsuSoleFlag = 0;\n                        correctTyping();\n            } else {\n              keyTempForSmallTsu = keyDownChar.key;\n              keyTempForSmallTsuSoleFlag = 0;\n              bonusCountReset();\n            };\n            console.log(keyTempForSmallTsuSoleFlag);\n        // 上記以外の場合\n        } else {\n          let wordLetter = charArrayInDisplayWordJap[0].textContent;\n                  // ローマ字変換の複数パターンをsplitする。\n              if (shiftAlreadyStartedFlag === 0 ){\n                  // ローマ字変換パターン１をsplitする。\n                  charArrayInDisplayWordAlpha = romaMappingTable[wordLetter].split(\"\").map(function(value){\n                  let spanValue = document.createElement(\"span\");\n                  spanValue.textContent = value;\n                  return spanValue;\n                });\n                  // ローマ字変換パターン２が存在する場合はsplitする。\n                  if (romaMappingTableSecond[wordLetter] != null){\n                    charArrayInDisplayWordAlphaSecond = romaMappingTableSecond[wordLetter].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                };\n                  // ローマ字変換パターン３が存在する場合はsplitする。\n                  if (romaMappingTableThird[wordLetter] != null){\n                    charArrayInDisplayWordAlphaThird = romaMappingTableThird[wordLetter].split(\"\").map(function(value){\n                    let spanValue = document.createElement(\"span\");\n                    spanValue.textContent = value;\n                    return spanValue;\n                  });\n                };\n              };\n              // タイプキーがローマ字変換パターン１に該当する場合\n              if(keyDownChar.key === charArrayInDisplayWordAlpha[0].textContent) {\n                  charArrayInDisplayWordAlpha.shift();\n                  shiftAlreadyStartedFlag = 1;\n                  shiftAlreadyStartedFlagSoleSecondThird = 1;\n                  if(charArrayInDisplayWordAlpha.length === 0){\n                    charArrayInDisplayWordJap[0].className = \"add_red\";\n                    charArrayInDisplayWordJap.shift();\n                    shiftAlreadyStartedFlag = 0;\n                  }};\n              // タイプキーがローマ字変換パターン２に該当する場合\n              if (romaMappingTableSecond[wordLetter] != null){\n                  if(keyDownChar.key === charArrayInDisplayWordAlphaSecond[0].textContent\n                      && charArrayInDisplayWordAlpha.length !== 0){\n                    charArrayInDisplayWordAlphaSecond.shift();\n                    shiftAlreadyStartedFlag = 1;\n                    shiftAlreadyStartedFlagSoleSecondThird = 1;\n                    if(charArrayInDisplayWordAlphaSecond.length === 0){\n                      charArrayInDisplayWordJap[0].className = \"add_red\";\n                      charArrayInDisplayWordJap.shift();\n                      shiftAlreadyStartedFlag = 0;\n                  }}};\n              // タイプキーがローマ字変換パターン３に該当する場合\n              if (romaMappingTableThird[wordLetter] != null){\n                  if(keyDownChar.key === charArrayInDisplayWordAlphaThird[0].textContent\n                    && charArrayInDisplayWordAlpha.length !== 0\n                    && charArrayInDisplayWordAlphaSecond.length !== 0){\n                    charArrayInDisplayWordAlphaThird.shift();\n                    shiftAlreadyStartedFlag = 1;\n                    shiftAlreadyStartedFlagSoleSecondThird = 1;\n                    if(charArrayInDisplayWordAlphaThird.length === 0){\n                      charArrayInDisplayWordJap[0].className = \"add_red\";\n                      charArrayInDisplayWordJap.shift();\n                      shiftAlreadyStartedFlag = 0;\n                    }}};\n              // タイプキーがローマ字変換パターン１〜３のいずれかに該当する場合\n              if (shiftAlreadyStartedFlagSoleSecondThird === 1) {\n                correctTyping(); \n                shiftAlreadyStartedFlagSoleSecondThird = 0;\n              } else {\n                bonusCountReset();\n              };\n        };\n    };\n\n    // function secondCharIsSmall(){\n\n    // };\n\n\n    function correctTyping(){\n      // メーターを更新する。\n      bonusCountMeter = bonusCountMeter +1;\n      // 表示文字全てタイプした場合、スコアアップ処理を実施し、次の表示文字を作成する処理を実施する。\n      if(charArrayInDisplayWordJap.length === 0) countUpScore(), createDisplayWord();\n      // メーターがメーター最大値以上になった場合、メーターを初期化し、プレイ可能時間を延長する。\n      if(bonusCountMeter >= bonusCountMeterMax){\n        bonusCountMeter = 0;\n        // 初期プレイ時間を更新することで、残りプレイ可能時間を延長する。\n        initialPlayingTimeMSec = initialPlayingTimeMSec +bonusAddPlayTime;\n        // 延長した残りプレイ時間を表示する。\n        displayBonusAddPlayTime.textContent = \"+ \" + Math.ceil(bonusAddPlayTime/1000) + \"秒\";\n        // 延長した残りプレイ時間をフェードアウトする。\n        displayBonusAddPlayTime.classList.add('fadeout');\n        // fadeoutのclassを取り除くことで、2回目以降も延長した残りプレイ時間が表示されるようにする。\n        setTimeout(function(){ \n          displayBonusAddPlayTime.textContent = \"\";\n          displayBonusAddPlayTime.classList.remove('fadeout');\n        }, 2000);\n      };\n      // 更新したメーターを表示する。\n      document.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n    };\n\n    function bonusCountReset(){\n      bonusCountMeter = 0;\n      document.getElementById(\"meterImg\").src=imgArray[bonusCountMeter];\n    };\n  }\n});\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClFA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7JA;AAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AAGA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AACA;AADA;AAGA;AAOA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AAAA;AAGA;AACA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AAGA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AADA;AACA;AACA;AADA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;;;;A","sourceRoot":""}